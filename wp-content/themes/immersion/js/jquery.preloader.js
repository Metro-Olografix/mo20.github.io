(function(a){a.fn.preloader=function(l){var e={delay:60,preload_parent:"a",check_timer:300,ondone:function(){},oneachload:function(i){},fadein:200};var l=a.extend(e,l),h=a("img.preload").css({visibility:"hidden",opacity:0}),d,b=0,f=0,c=[],g=l.delay,k=function(){d=setInterval(function(){if(b>=c.length){clearInterval(d);l.ondone();return}for(f=0;f<h.length;f++){if(h[f].complete==true){if(c[f]==false){c[f]=true;l.oneachload(h[f]);b++;g=g+l.delay}jQuery(h[f]).css("visibility","visible").delay(g).animate({opacity:1},l.fadein,function(){jQuery(this).parent().removeClass("preloader")})}}},l.check_timer)};h.each(function(){if(jQuery(this).parent(l.preload_parent).length==0){a(this).wrap("<a class='preloader' />")}else{jQuery(this).parent().addClass("preloader")}c[f++]=false});h=jQuery.makeArray(h);var j=jQuery("<img />",{id:"loadingicon",src:global_var.loading_url+"/img/loading.gif"}).hide().appendTo("body");d=setInterval(function(){if(j[0].complete==true){clearInterval(d);k();return}},50)}})(jQuery);